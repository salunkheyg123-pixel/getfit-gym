<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel - Members & Trainers</title>

<script src="https://cdn.tailwindcss.com"></script>

<style>
  body {
    margin: 0;
    padding: 0;
    font-family: 'Poppins', sans-serif;
    background: url("{{ url_for('static', filename='image/gym.jpg') }}") no-repeat center center fixed;
    background-size: cover;
    color: #d1f7c4;
    min-height: 100vh;
  }

  .bg-overlay {
    background: rgba(26, 29, 43, 0.92);
    border-radius: 0.75rem;
    padding: 1rem;
  }

  .overflow-x-auto::-webkit-scrollbar {
    height: 8px;
  }
  .overflow-x-auto::-webkit-scrollbar-thumb {
    background: #4ade80;
    border-radius: 4px;
  }
</style>
</head>

<body class="p-6">

<h1 class="text-3xl font-bold text-green-400 mb-8 text-center uppercase tracking-wider">
  Gym Admin Control Panel
</h1>

<div class="flex flex-col lg:flex-row gap-6">

<!-- ================= LEFT SIDE ================= -->
<div class="flex-1 space-y-6">

<!-- ===== Add Member ===== -->
<div class="bg-overlay shadow-xl border border-green-900">
  <h2 class="text-xl font-semibold mb-4 text-green-300 border-b border-green-800 pb-2">
    Add New Member
  </h2>

  <form method="POST" action="{{ url_for('admin_panel') }}" class="space-y-3">

    <input type="text" name="name" placeholder="Full Name"
      class="w-full p-2 rounded bg-gray-800 text-green-100 border border-green-700 focus:border-green-400 outline-none"
      required>

    <div class="grid grid-cols-2 gap-2">
      <input type="email" name="email" placeholder="Email Address"
        class="p-2 rounded bg-gray-800 text-green-100 border border-green-700 focus:border-green-400 outline-none"
        required>

      <input type="tel" name="number" placeholder="Phone Number"
        class="p-2 rounded bg-gray-800 text-green-100 border border-green-700 focus:border-green-400 outline-none"
        required>
    </div>

    <select name="plan"
      class="w-full p-2 rounded bg-gray-800 text-green-100 border border-green-700 focus:border-green-400 outline-none"
      required>
      <option value="" disabled selected>Select Membership Plan</option>
      <option value="monthly">Monthly - ₹1000</option>
      <option value="quarterly">Quarterly - ₹2700</option>
      <option value="half-yearly">Half-Yearly - ₹5000</option>
      <option value="yearly">Yearly - ₹10000</option>
    </select>

    <div class="grid grid-cols-2 gap-2">
      <select name="description"
        class="p-2 rounded bg-gray-800 text-green-100 border border-green-700 focus:border-green-400 outline-none"
        required>
        <option value="" disabled selected>Select Activity</option>
        <option>Yoga</option>
        <option>Boxing</option>
        <option>Cardio</option>
        <option>Strength Training</option>
        <option>Personal Training</option>
        <option>Other</option>
      </select>

      <select name="assigned_trainer"
        class="p-2 rounded bg-gray-800 text-green-100 border border-green-700 focus:border-green-400 outline-none"
        required>
        <option value="" disabled selected>Assign Trainer</option>
        {% for trainer in Trainers %}
        <option value="{{ trainer.name }}">
          {{ trainer.name }} ({{ trainer.specialty }})
        </option>
        {% endfor %}
        <option value="None">No Trainer Assigned</option>
      </select>
    </div>

    <button type="submit" name="action" value="add_member"
      class="w-full bg-green-500 text-gray-900 font-bold py-2 rounded hover:bg-green-400 transition">
      Register Member
    </button>

    {% if error_member %}
    <p class="text-red-500 text-sm text-center bg-red-900/30 py-1 rounded">
      {{ error_member }}
    </p>
    {% endif %}

  </form>
</div>

<!-- ===== Members Table ===== -->
<div class="bg-overlay shadow-xl border border-green-900">
  <h2 class="text-xl font-semibold mb-4 text-center text-green-300">
    Active Members
  </h2>

  <div class="overflow-x-auto">
    <table class="min-w-[900px] w-full text-green-100 border-collapse">

      <thead>
        <tr class="bg-gray-800 text-green-400 text-sm">
          <th class="p-3 border border-green-800">ID</th>
          <th class="p-3 border border-green-800">Name</th>
          <th class="p-3 border border-green-800">Email</th>
          <th class="p-3 border border-green-800">Phone</th>
          <th class="p-3 border border-green-800">Plan</th>
          <th class="p-3 border border-green-800">Activity</th>
          <th class="p-3 border border-green-800">Trainer</th>
          <th class="p-3 border border-green-800">Action</th>
        </tr>
      </thead>

      <tbody>
        {% for member in Members %}
        <tr class="text-center hover:bg-gray-800/50 border-b border-green-900">
          <td class="p-2">{{ member.id }}</td>
          <td class="p-2 font-medium">{{ member.name }}</td>
          <td class="p-2 text-xs text-gray-400">{{ member.email }}</td>
          <td class="p-2">{{ member.number }}</td>
          <td class="p-2 capitalize">{{ member.plan }}</td>
          <td class="p-2">{{ member.description }}</td>
          <td class="p-2 text-yellow-400 font-semibold">
            {{ member.assigned }}
          </td>
          <td class="p-2">
            <a href="{{ url_for('remove_member', id=member.id) }}"
              onclick="return confirm('Delete this member?')"
              class="bg-red-600/80 text-white px-3 py-1 rounded text-xs hover:bg-red-500">
              Remove
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>

    </table>
  </div>
</div>

</div>

<!-- ================= RIGHT SIDE ================= -->
<div class="flex-1 space-y-6">

<!-- ===== Add Trainer ===== -->
<div class="bg-overlay shadow-xl border border-green-900">
  <h2 class="text-xl font-semibold mb-4 text-green-300 border-b border-green-800 pb-2">
    Add New Trainer
  </h2>

  <form method="POST" action="{{ url_for('admin_panel') }}" class="space-y-3">

    <div class="grid grid-cols-2 gap-2">
      <input type="text" name="trainer_id" placeholder="Staff ID"
        class="p-2 rounded bg-gray-800 text-green-100 border border-green-700 focus:border-green-400 outline-none"
        required>

      <input type="text" name="name" placeholder="Trainer Name"
        class="p-2 rounded bg-gray-800 text-green-100 border border-green-700 focus:border-green-400 outline-none"
        required>
    </div>

    <input type="tel" name="phone" placeholder="Phone Number"
      class="w-full p-2 rounded bg-gray-800 text-green-100 border border-green-700 focus:border-green-400 outline-none"
      required>

    <select name="specialty"
      class="w-full p-2 rounded bg-gray-800 text-green-100 border border-green-700 focus:border-green-400 outline-none"
      required>
      <option value="" disabled selected>Select Specialist Area</option>
      <option>Yoga</option>
      <option>Boxing</option>
      <option>Cardio</option>
      <option>Strength Training</option>
      <option>Personal Training</option>
      <option>Other</option>
    </select>

    <input type="password" name="password" placeholder="Access Password"
      class="w-full p-2 rounded bg-gray-800 text-green-100 border border-green-700 focus:border-green-400 outline-none"
      required>

    <button type="submit" name="action" value="add_trainer"
      class="w-full bg-green-500 text-gray-900 font-bold py-2 rounded hover:bg-green-400 transition">
      Register Trainer
    </button>

    {% if error_trainer %}
    <p class="text-red-500 text-sm text-center bg-red-900/30 py-1 rounded">
      {{ error_trainer }}
    </p>
    {% endif %}
  </form>
</div>

<!-- ===== Trainers Table ===== -->
<div class="bg-overlay shadow-xl border border-green-900">
  <h2 class="text-xl font-semibold mb-4 text-center text-green-300">
    Professional Staff
  </h2>

  <div class="overflow-x-auto">
    <table class="min-w-[600px] w-full text-green-100 border-collapse">

      <thead>
        <tr class="bg-gray-800 text-green-400 text-sm">
          <th class="p-3 border border-green-800">Staff ID</th>
          <th class="p-3 border border-green-800">Name</th>
          <th class="p-3 border border-green-800">Phone</th>
          <th class="p-3 border border-green-800">Specialty</th>
          <th class="p-3 border border-green-800">Action</th>
        </tr>
      </thead>

      <tbody>
        {% for trainer in Trainers %}
        <tr class="text-center hover:bg-gray-800/50 border-b border-green-900">
          <td class="p-2">{{ trainer.trainer_id }}</td>
          <td class="p-2 font-medium">{{ trainer.name }}</td>
          <td class="p-2">{{ trainer.phone }}</td>
          <td class="p-2">{{ trainer.specialty }}</td>
          <td class="p-2">
            <a href="{{ url_for('remove_trainer', id=trainer.id) }}"
              onclick="return confirm('Delete this trainer?')"
              class="bg-red-600/80 text-white px-3 py-1 rounded text-xs hover:bg-red-500">
              Remove
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>

    </table>
  </div>
</div>

</div>
</div>

<!-- ===== Logout ===== -->
<div class="text-center mt-10">
  <a href="{{ url_for('logout') }}"
    class="bg-red-500/20 text-red-400 border border-red-500/50 font-bold py-2 px-8 rounded-full hover:bg-red-500 hover:text-white transition">
    System Logout
  </a>
</div>

</body>
</html>
